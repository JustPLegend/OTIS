<!DOCTYPE html>

<html>

<head>
  <title>Simple light IOT</title>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<style>
  .jumbotron {
    background-color: #7d09d3;
    color: #fff;
  }

  .square1 {
    background-color: yellow;
    width: 100px;
    height: 100px;

  }

  .square2 {
    background-color: darkblue;
    width: 100px;
    height: 100px;
  }

  .square3 {
    background-color: green;
    width: 100px;
    height: 100px;
  }

  /*Dodato svjetlo CRVENO*/
  .square4 {
    background-color: rgb(91, 30, 2);
    width: 100px;
    height: 100px;
  }

  .squareWrapper {
    /*Oko svjetla crni krug*/
    border: 1px solid black;
    width: 100px;
    height: 100px;
  }

  h4 {

    font-family: 'Times New Roman', Times, serif;
  }

  a {
    color: #fff;

  }
</style>

<body>

  <div class="container">
    <div class="jumbotron">
      <h1>DRIOT - LIGHTS </h1>

      <p>“Tell me and I forget, teach me and I may remember, involve me and I learn.”</p>
      <br>

      <a href="https://tinyurl.com/signInArduino"> Sign In Arduino | </a>
      <a href="https://firebase.google.com/"> Firebase login | </a>
      <a href="https://www.tinkercad.com/">Tinkercad</a>
    </div>

    <h4> Dekorativne svjetiljke izumio je Carl Otis, zaposlenik u NOMA Electric Company 1940 – ih. NOMA je tada
      prodavala na milione svake godine. U 21 vijeku,
      kada je tehnologija napredovala možemo da koristimo LED svjetla za ukrašavanje jelke, domova, poslovnih objekata
      tokom čitave godine
    </h4>

  </div>


  <div class="container">
    <div class="row">

      <div align="center" class="col-md-4">
        <!---green--->
        <h4> GREEN LIGHT </h4>
        <div class="squareWrapper">
          <div class="square3"> </div>
        </div>
      </div>

      <div align="center" class="col-md-4">
        <!-- yellow light-->

        <h4> YELLOW LIGHT </h4>
        <div class="squareWrapper">
          <div class="square1"> </div>
        </div>

      </div>

      <div align="center" class="col-md-4">
        <!---darkblue--->
        <h4> DARK BLUE LIGHT </h4>
        <div class="squareWrapper">
          <div class="square2"> </div>
        </div>
      </div>

      <!---------------DODATO SVJETLO---------------------->
      <div align="center" class="col-md-4">
        <!---crveno--->
        <h4> DARK RED LIGHT </h4>
        <div class="squareWrapper">
          <div class="square4"> </div>
        </div>
      </div>


    </div>
    <!--class row-->
  </div>
  <!--container-->
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>

  <script>
    const firebaseConfig = {

      apiKey: "AIzaSyCnLuWDJDOuUmBvdiUkp2dLYJ9I93zC2zA",

      authDomain: "jpl-app.firebaseapp.com",

      databaseURL: "https://jpl-app-default-rtdb.europe-west1.firebasedatabase.app",

      projectId: "jpl-app",

      storageBucket: "jpl-app.appspot.com",

      messagingSenderId: "1035340751332",

      appId: "1:1035340751332:web:9938fa284a213a9ddca7f1"

    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let zelena = document.querySelector('.square3');
    let zuta = document.querySelector('.square1');
    let plava = document.querySelector('.square2');
    let crvena = document.querySelector('.square4');  //Dodata crvena

    let interval;

    function Svjetla(s1, s2, s3, s4) {
      zelena.style.opacity = s1;
      zuta.style.opacity = s2;
      plava.style.opacity = s3;
      crvena.style.opacity = s4; //dodata crvena
    }

    function mod1() {
      Svjetla(1, 0, 0, 0);          //crvena  //opposite 0,0,1

      setTimeout(function () {
        Svjetla(0, 1, 0, 0);         //crvena   //0, 1, 0
      }, 1000);
      //1000 sek 
      setTimeout(function () {
        Svjetla(0, 0, 1, 0);       //crvena     //1, 0, 0
      }, 2000);

      setTimeout(function () {
        Svjetla(0, 0, 0, 1);         //crvena   //0, 1, 0
      }, 2500);
    }

    function mod2() {
      setTimeout(function () {
        Svjetla(1, 1, 1, 1);           //deff:sva upaljena (1,1,1)   (1,0,1) - zuta izgasena 
      }, 1000);
      setTimeout(function () {
        Svjetla(0, 0, 0, 0);         //sva izgasena  
      }, 2000);
    }

    function mod3() {
      let s1 = Math.round(Math.random());
      let s2 = Math.round(Math.random());
      let s3 = Math.round(Math.random());
      let s4 = Math.round(Math.random());          //dodato 4 svjetlo crveno
      Svjetla(s1, s2, s3, s4);
    }

    //Mode 4 dodat (ne svjetlo nego mod)
    //Izgasena zuta kad se pale 

    function mod4() {           //dodato crveno
      setTimeout(function () {
        Svjetla(1, 0, 1, 1);           // (1,0,1) - zuta izgasena 
      }, 1000);
      setTimeout(function () {
        Svjetla(0, 0, 0, 0);         //sva izgasena  
      }, 2000);
    }



    function OnOff(displayVrijednost) {   //crvena
      zelena.style.display = displayVrijednost;
      zuta.style.display = displayVrijednost;
      plava.style.display = displayVrijednost;
      crvena.style.display = displayVrijednost;
    }

    function OcistiInterval() {
      clearInterval(interval);
      interval = null;
    }


    db.ref('/Glavni/Dugme').on('value', dugme => {

      if (dugme.val() == true) {
        OcistiInterval();
        OnOff('block');
        Svjetla(1, 1, 1, 1);    //crvena
        db.ref('/Glavni/Mod').set(0);
      }
      else if (dugme.val() == false) {
        OcistiInterval();
        db.ref('/Glavni/Mod').set(0);
        OnOff('none');
      }
    });

    db.ref('/Glavni/Mod').on('value', mod => {

      switch (mod.val()) {
        case 0:
          OcistiInterval();
          interval = setInterval(Svjetla, 500, 1, 1, 1); (nazi)
          break;
        case 1:
          OcistiInterval();
          interval = setInterval(mod1, 3000);
          break;
        case 2:
          OcistiInterval();
          interval = setInterval(mod2, 3000);
          break;
        case 3:
          OcistiInterval();
          interval = setInterval(mod3, 1000);
          break;
        case 4:                                        //mod4
          OcistiInterval();
          interval = setInterval(mod4, 2000);
          break;
      }
    });
  </script>

</body>

</html>